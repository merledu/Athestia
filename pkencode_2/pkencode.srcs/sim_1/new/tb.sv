`timescale 1ns / 1ps
//////////////////////////////////////////////////////////////////////////////////
// Company: 
// Engineer: 
// 
// Create Date: 12/25/2024 01:44:18 AM
// Design Name: 
// Module Name: tb
// Project Name: 
// Target Devices: 
// Tool Versions: 
// Description: 
// 
// Dependencies: 
// 
// Revision:
// Revision 0.01 - File Created
// Additional Comments:
// 
//////////////////////////////////////////////////////////////////////////////////


module tb;
    reg clk;
    reg reset;
    reg [255:0] rho;
    reg [9:0] t1[7:0][255:0]; // 8 polynomials each with 256 coefficients of 10 bits

    wire [20735:0] pk;
    wire valid;

    PkEncode uut (
        .clk(clk),
        .reset(reset),
        .rho(rho),
        .t1(t1),
        .pk(pk),
        .valid(valid)
    );
    // Clock generation
    always #5 clk = ~clk; // Generate a clock with a period of 10ns
    // Initialize Inputs and generate test vectors
    initial begin
        // Initialize Inputs
        clk = 0;
        reset = 1;
//       rho = 256'h6d378ad2e47a0c996e37d52c55cda67bcca6ff8f1d2cd66439a8536bb684e20f;   //python
        //rho = 256'h0fe284b66b358a39646dc21d8fff6acc7ba6dc552cd5736e990c7ae4d28a376d;
        rho = 256'd0;
        t1[0] = '{787, 690, 216, 813, 845, 504, 941, 243, 880, 649, 979, 123, 320, 1018, 881, 167, 163, 919, 22, 97, 522, 457, 526, 144, 707, 941, 891, 679, 91, 682, 26, 266, 132, 534, 366, 353, 281, 655, 619, 898, 23, 628, 642, 309, 595, 997, 851, 932, 439, 308, 568, 428, 766, 684, 932, 720, 641, 853, 908, 514, 713, 322, 348, 808, 670, 350, 149, 529, 800, 319, 494, 665, 1012, 122, 647, 830, 373, 358, 697, 678, 565, 827, 985, 277, 332, 555, 446, 241, 361, 915, 456, 460, 919, 298, 867, 965, 829, 630, 523, 532, 700, 89, 639, 947, 645, 604, 575, 201, 173, 206, 418, 988, 105, 436, 510, 120, 443, 172, 1014, 37, 676, 829, 346, 237, 248, 99, 970, 587, 741, 295, 343, 854, 58, 834, 435, 324, 219, 617, 322, 57, 806, 936, 53, 448, 617, 463, 842, 203, 573, 363, 143, 990, 660, 846, 715, 209, 806, 898, 205, 301, 573, 846, 27, 285, 58, 213, 949, 349, 1011, 330, 407, 553, 596, 395, 1017, 787, 664, 406, 899, 272, 908, 721, 718, 637, 557, 767, 790, 357, 807, 702, 370, 990, 231, 188, 390, 588, 254, 928, 226, 470, 750, 445, 851, 404, 61, 874, 627, 206, 997, 302, 80, 964, 318, 116, 348, 838, 484, 144, 809, 140, 917, 298, 887, 645, 798, 611, 738, 844, 178, 757, 772, 572, 725, 565, 438, 325, 815, 224, 485, 75, 394, 446, 291, 258, 952, 237, 477, 138, 80, 410, 165, 884, 155, 645, 919, 83};
        t1[1] = '{472, 844, 430, 541, 644, 576, 861, 835, 485, 274, 576, 677, 357, 48, 827, 510, 917, 412, 920, 121, 912, 938, 400, 8, 962, 39, 310, 749, 440, 476, 902, 976, 581, 547, 523, 430, 799, 261, 666, 524, 865, 901, 875, 213, 760, 477, 610, 76, 404, 969, 1018, 427, 471, 928, 904, 738, 697, 676, 137, 876, 748, 260, 896, 867, 164, 233, 45, 562, 65, 79, 719, 922, 106, 102, 103, 119, 325, 204, 40, 569, 568, 861, 883, 237, 486, 665, 610, 1012, 5, 65, 893, 219, 746, 456, 251, 487, 707, 534, 731, 496, 642, 422, 320, 384, 779, 831, 747, 191, 264, 426, 676, 344, 869, 741, 278, 312, 587, 760, 829, 845, 733, 646, 489, 674, 692, 138, 374, 1012, 393, 510, 103, 823, 628, 164, 27, 412, 768, 202, 86, 496, 1010, 674, 471, 244, 1015, 418, 865, 819, 195, 279, 287, 61, 123, 483, 430, 126, 194, 955, 330, 82, 699, 522, 144, 461, 981, 760, 443, 800, 500, 383, 645, 918, 321, 872, 789, 807, 279, 132, 350, 6, 585, 253, 197, 289, 642, 377, 61, 614, 1019, 22, 519, 721, 278, 968, 303, 240, 804, 542, 744, 865, 480, 783, 723, 415, 139, 74, 311, 151, 38, 44, 529, 427, 732, 913, 420, 447, 41, 319, 85, 915, 508, 839, 883, 243, 550, 6, 95, 203, 725, 710, 402, 853, 949, 470, 428, 487, 1005, 591, 568, 42, 560, 986, 334, 1021, 206, 498, 238, 59, 115, 699, 441, 747, 866, 216, 520, 837};
        t1[2] = '{1004, 907, 915, 853, 225, 653, 414, 419, 743, 819, 845, 967, 776, 458, 731, 37, 161, 548, 151, 489, 397, 497, 271, 659, 283, 14, 183, 728, 981, 689, 789, 197, 283, 326, 897, 481, 17, 539, 60, 319, 877, 656, 418, 1002, 375, 839, 432, 524, 514, 52, 538, 917, 1014, 1019, 262, 485, 384, 129, 327, 68, 622, 172, 1004, 901, 330, 233, 217, 24, 138, 589, 873, 778, 637, 330, 355, 607, 715, 892, 186, 240, 855, 410, 488, 900, 614, 610, 389, 450, 499, 639, 887, 261, 470, 559, 615, 794, 735, 573, 424, 465, 598, 178, 785, 886, 861, 281, 984, 614, 560, 696, 108, 817, 498, 227, 994, 901, 829, 493, 80, 576, 617, 929, 138, 670, 748, 400, 311, 421, 87, 19, 27, 675, 981, 750, 526, 246, 906, 391, 153, 83, 559, 832, 419, 789, 694, 495, 830, 330, 802, 278, 363, 10, 143, 886, 592, 852, 16, 304, 277, 724, 282, 301, 184, 123, 870, 421, 320, 555, 308, 586, 204, 701, 27, 1008, 248, 876, 771, 461, 388, 521, 66, 781, 294, 921, 897, 465, 446, 244, 566, 467, 319, 631, 443, 223, 245, 669, 280, 15, 499, 137, 963, 894, 655, 1015, 14, 156, 703, 665, 739, 284, 850, 851, 626, 727, 15, 163, 245, 555, 786, 908, 464, 78, 512, 846, 1004, 403, 650, 164, 223, 964, 423, 40, 320, 1002, 1015, 535, 58, 662, 402, 785, 821, 785, 277, 1018, 434, 25, 837, 178, 965, 475, 633, 383, 170, 551, 576, 778};
        t1[3] = '{236, 178, 992, 512, 410, 1000, 792, 7, 250, 740, 865, 46, 839, 951, 632, 370, 898, 694, 429, 695, 361, 51, 117, 430, 901, 79, 210, 321, 620, 657, 951, 69, 133, 518, 733, 1001, 25, 61, 265, 642, 939, 703, 420, 687, 179, 423, 603, 401, 68, 239, 328, 35, 657, 67, 880, 228, 775, 535, 665, 538, 961, 189, 107, 202, 718, 271, 704, 136, 321, 262, 515, 893, 438, 27, 913, 892, 436, 837, 263, 980, 337, 344, 430, 681, 697, 49, 288, 355, 655, 412, 1001, 688, 771, 784, 271, 392, 43, 585, 126, 836, 1008, 272, 69, 392, 698, 394, 729, 745, 790, 397, 622, 275, 711, 575, 540, 963, 940, 106, 292, 509, 52, 379, 987, 861, 303, 67, 852, 296, 750, 178, 887, 434, 865, 303, 1022, 165, 6, 659, 596, 774, 606, 1019, 332, 227, 794, 695, 925, 967, 845, 529, 715, 713, 959, 144, 392, 863, 478, 953, 670, 741, 31, 272, 756, 49, 53, 602, 363, 320, 310, 626, 709, 774, 12, 25, 553, 138, 1, 593, 79, 518, 504, 830, 840, 880, 927, 960, 332, 787, 309, 302, 973, 65, 571, 998, 925, 239, 78, 292, 473, 790, 289, 433, 786, 679, 152, 851, 722, 514, 841, 422, 695, 981, 869, 228, 224, 766, 132, 136, 374, 580, 958, 947, 715, 576, 313, 600, 800, 466, 370, 331, 535, 1018, 436, 492, 236, 678, 16, 149, 633, 124, 805, 949, 21, 194, 996, 927, 154, 56, 24, 300, 523, 927, 64, 508, 247, 113};
        t1[4] = '{1016, 464, 892, 83, 855, 639, 665, 74, 710, 48, 363, 43, 283, 266, 288, 907, 219, 815, 787, 182, 560, 737, 502, 197, 796, 496, 383, 854, 498, 329, 469, 450, 221, 876, 910, 706, 177, 809, 630, 514, 330, 676, 520, 773, 172, 277, 309, 59, 597, 865, 588, 426, 689, 909, 78, 335, 3, 639, 702, 876, 807, 280, 592, 562, 58, 694, 864, 304, 932, 582, 214, 524, 34, 960, 621, 31, 787, 818, 945, 250, 1009, 576, 113, 168, 768, 302, 420, 1012, 131, 653, 1000, 826, 591, 642, 769, 406, 262, 24, 160, 467, 843, 487, 831, 877, 519, 294, 436, 887, 838, 748, 773, 226, 826, 48, 213, 593, 969, 37, 545, 701, 315, 933, 691, 749, 768, 612, 294, 375, 692, 83, 966, 581, 294, 805, 395, 139, 280, 701, 417, 404, 172, 150, 370, 473, 172, 836, 586, 635, 125, 38, 474, 319, 659, 549, 324, 580, 529, 401, 865, 722, 869, 49, 964, 584, 547, 299, 839, 342, 590, 271, 130, 387, 824, 947, 398, 575, 859, 309, 833, 481, 709, 573, 967, 719, 570, 547, 997, 221, 282, 84, 660, 695, 939, 17, 318, 211, 217, 234, 208, 994, 228, 70, 750, 802, 563, 916, 839, 285, 45, 572, 523, 132, 313, 776, 951, 613, 731, 574, 357, 284, 289, 223, 695, 588, 816, 915, 845, 419, 635, 870, 655, 954, 117, 949, 193, 690, 644, 94, 204, 992, 975, 960, 252, 97, 910, 393, 259, 29, 882, 589, 216, 887, 903, 420, 358, 944};
        t1[5] = '{900, 216, 867, 247, 426, 608, 227, 855, 597, 374, 516, 365, 336, 858, 411, 851, 326, 796, 446, 872, 1015, 391, 438, 694, 564, 169, 794, 270, 199, 128, 531, 824, 553, 885, 421, 659, 3, 417, 495, 425, 146, 216, 935, 646, 281, 861, 637, 720, 963, 492, 915, 716, 312, 238, 840, 519, 54, 335, 1019, 535, 599, 902, 853, 377, 937, 122, 692, 95, 608, 404, 841, 378, 609, 269, 1, 355, 355, 835, 828, 640, 306, 861, 673, 954, 136, 874, 879, 660, 767, 688, 564, 586, 755, 967, 309, 909, 595, 753, 557, 925, 214, 627, 1016, 791, 276, 87, 690, 530, 604, 72, 865, 761, 334, 604, 457, 483, 788, 57, 788, 598, 443, 491, 523, 394, 458, 703, 857, 416, 635, 709, 752, 346, 52, 844, 261, 80, 235, 175, 758, 808, 949, 97, 98, 449, 296, 756, 620, 896, 36, 812, 460, 335, 541, 753, 87, 183, 153, 130, 983, 291, 373, 836, 16, 946, 502, 542, 641, 645, 1008, 505, 734, 402, 263, 915, 417, 408, 675, 666, 517, 403, 579, 790, 554, 618, 760, 730, 603, 264, 800, 810, 338, 922, 785, 622, 22, 717, 683, 980, 782, 246, 771, 78, 774, 123, 89, 1018, 544, 244, 319, 475, 547, 332, 94, 109, 748, 725, 779, 0, 439, 616, 307, 855, 60, 65, 506, 296, 78, 976, 150, 293, 573, 280, 587, 457, 753, 690, 349, 525, 722, 100, 690, 998, 944, 265, 186, 354, 903, 238, 1006, 670, 114, 440, 793, 920, 728, 485};
        t1[6] = '{225, 364, 494, 960, 903, 789, 935, 998, 365, 156, 242, 11, 961, 56, 255, 349, 903, 0, 447, 65, 1012, 66, 803, 966, 360, 210, 605, 691, 635, 204, 290, 638, 690, 266, 228, 656, 4, 358, 448, 285, 264, 611, 61, 536, 27, 533, 357, 483, 593, 713, 297, 204, 963, 431, 390, 1022, 144, 735, 269, 523, 244, 493, 783, 61, 191, 969, 784, 438, 147, 306, 160, 87, 459, 174, 61, 122, 288, 611, 896, 264, 362, 518, 472, 178, 498, 228, 846, 419, 367, 883, 967, 1013, 510, 215, 396, 741, 632, 10, 603, 61, 478, 190, 562, 282, 900, 890, 261, 324, 1008, 369, 640, 82, 958, 611, 151, 690, 991, 899, 648, 857, 131, 454, 462, 6, 867, 708, 667, 771, 427, 505, 780, 772, 202, 504, 799, 607, 38, 677, 393, 160, 308, 923, 769, 610, 867, 594, 156, 566, 209, 433, 875, 167, 857, 757, 587, 610, 277, 368, 847, 929, 435, 100, 440, 53, 171, 150, 757, 856, 617, 450, 913, 295, 481, 115, 1, 88, 692, 752, 1, 134, 360, 830, 117, 705, 849, 70, 900, 628, 943, 967, 535, 788, 835, 419, 877, 192, 825, 875, 350, 954, 357, 893, 902, 858, 482, 293, 473, 996, 244, 76, 476, 788, 410, 176, 514, 599, 880, 378, 126, 205, 557, 873, 341, 821, 963, 872, 208, 739, 531, 35, 774, 487, 376, 509, 232, 322, 478, 12, 462, 368, 702, 668, 499, 335, 1013, 273, 427, 837, 748, 941, 215, 58, 630, 713, 552, 722};
        t1[7] = '{519, 768, 932, 123, 632, 735, 685, 302, 842, 484, 610, 1011, 249, 826, 61, 465, 457, 320, 507, 278, 866, 167, 211, 738, 311, 55, 382, 126, 222, 328, 110, 301, 1017, 751, 694, 880, 431, 384, 154, 485, 912, 1016, 846, 244, 557, 453, 700, 980, 467, 950, 580, 148, 905, 647, 729, 760, 548, 527, 829, 245, 659, 99, 791, 293, 139, 796, 914, 888, 385, 401, 334, 475, 646, 891, 118, 218, 861, 339, 154, 887, 379, 27, 439, 208, 949, 28, 628, 943, 745, 104, 889, 234, 806, 343, 165, 751, 266, 827, 354, 748, 54, 304, 225, 797, 556, 382, 486, 1012, 1007, 524, 782, 498, 206, 172, 79, 862, 553, 846, 340, 911, 486, 801, 452, 650, 718, 429, 532, 305, 624, 662, 556, 88, 813, 787, 505, 925, 474, 122, 248, 662, 721, 709, 741, 878, 513, 941, 527, 11, 616, 383, 471, 680, 692, 647, 756, 440, 665, 414, 431, 833, 782, 578, 59, 577, 509, 678, 586, 680, 584, 764, 475, 2, 376, 204, 588, 890, 491, 965, 525, 751, 790, 997, 993, 399, 164, 895, 202, 265, 863, 484, 1000, 845, 78, 945, 152, 377, 278, 608, 306, 269, 467, 524, 531, 280, 805, 469, 375, 79, 48, 155, 30, 608, 816, 170, 712, 987, 33, 699, 48, 494, 488, 288, 846, 234, 545, 773, 77, 916, 482, 950, 37, 344, 447, 829, 687, 806, 452, 417, 594, 975, 132, 913, 864, 751, 200, 857, 224, 715, 147, 308, 97, 934, 410, 608, 844, 856};

        // Apply reset
        #10 reset = 0;

        // Wait for valid signal to check output
        wait(valid == 1);
        $display("PK: %0h", pk);

        // Finish simulation after some time to allow observation
        #100;
        $finish;
    end

endmodule
