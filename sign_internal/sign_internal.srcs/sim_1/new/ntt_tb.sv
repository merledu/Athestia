`timescale 1ns / 1ps

module tb_ntt;
    // Parameters
    parameter int q = 8380417;

    // DUT inputs and outputs
    logic clk, rst, start;
    logic signed [22:0] w [0:255];
    logic signed [31:0] w_hat [0:255];
//    logic done;

    // Clock generation
    initial begin
        clk = 0;
        forever #0.4 clk = ~clk; // 100 MHz clock
    end

    // DUT instantiation
    NTT uut (
        .clk(clk),
        .rst(rst),
        .w(w),
        .w_hat(w_hat)
//        .done(done
    );

    // Testbench logic
    initial begin
        // Initialize inputs
        #3
        rst = 1;
        start = 0;
        w = '{-1652, 2498, -859, -1057, 2042, -2451, 1857, 315, 1277, 2370, 975, -3370, 2904, 2128, 2660, 1260, -3423, 2666, 3296, -40, 1341, -60, -2409, 1559, -881, -3635, -752, -170, 547, -3257, 964, -2903, 3910, -1887, -3586, -3558, -1841, 1144, 1150, -927, -256, 2838, 3864, 3418, 4016, 1092, 3725, -694, 3141, -447, 3643, -1411, -384, 1550, -923, 3833, -3142, 3188, -2050, 2957, -1557, 3120, 2615, -4080, 2185, 3164, 1531, 1786, -3008, -1592, -2607, -1454, -3642, 749, 3857, 2256, 3131, -3890, -829, -2044, 3711, -3808, -847, -1686, -3603, 1461, -1691, -925, 1596, 3024, -2525, 2672, 3004, -210, 2358, 1568, 3818, -1138, -1708, -3577, -2760, -587, -2081, -2578, -4077, 3170, 3483, 2802, -1767, -1470, 2598, 1530, -2271, -1937, 1606, -124, 3550, 1789, -1740, 1826, 3937, -3525, 35, -1546, 2983, -2854, -3089, -3422, -3200, -1296, -97, -3795, -671, -738, 4077, -1440, -2575, -2787, -2006, -3027, 2917, -1933, -4089, 16, 462, 226, 3922, -315, -2117, -1458, -2521, 2786, -186, 2169, 3125, -2608, 2973, 714, -170, -718, 2992, -2862, -2290, 1028, -321, 3061, -1637, -1086, 77, -919, -3001, -1401, 2369, 2167, 3638, -2435, -2407, -3574, 2746, 1617, 1385, 1773, 744, 2688, 944, 3062, 
        851, 952, 1725, 2307, 1262, -2226, -3062, 1852, -1240, 3194, -483, -3441, 1382, 433, -3618, 3569, 2380, -3663, -3717, 3033, 2321, 3339, -2616, 3213, 3769, 2320, 1741, -1000, 2019, -1737, -2101, -962, 4080, -2520, 2840, 45, 4041, 1752, 2574, -3480, 61, 3764, 3141, 832, -3078, 3352, 2725, -786, -1563, 1004, -1666, -2046, 1710, -3268, 613, 535, -1467, 3028, -3819, 1431, 3365, -1064, -162, 4057, 893, 1759, -3184, 3496, 2443, 1152}; // Initialize w with 0 to 255

        // Apply reset
        #1 rst = 0;

        // Start the NTT computation
        start = 1;
//        #10 start = 1;

        // Wait for completion
//        wait(done);

        // Display results
//        $display("NTT computation complete.");
//        for (int i = 0; i < 256; i++) begin
//            $display("w_hat[%0d] = %0d", i, w_hat[i]);
//        end

        // End simulation
        #1000 $stop;
    end
endmodule
